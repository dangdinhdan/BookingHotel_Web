@model HotelBooking_Web.Models.EditProfileViewModel

@{
    ViewBag.Title = "Chỉnh sửa Hồ sơ";
    Layout = "~/Views/Shared/_ProfileLayout.cshtml";
    ViewBag.ActivePage = "Profile";
}

<h2>@ViewBag.Title</h2>

@using (Html.BeginForm("EditProfile", "TaiKhoan", FormMethod.Post, new { @class = "profile-form" }))
{
    @Html.AntiForgeryToken()

    if (TempData["SuccessMessage"] != null)
    {
        <div class="cp-message-box success">@TempData["SuccessMessage"]</div>
    }

    if (TempData["ErrorMessage"] != null)
    {
        <div class="cp-message-box error">@TempData["ErrorMessage"]</div>
    }

    @Html.ValidationSummary(true, "", new { @class = "text-danger", style = "color:red; margin-bottom:15px;" })

    <div class="profile-card">
        <div class="profile-card-header" style="border-bottom: 1px solid #eee; padding-bottom: 15px; margin-bottom: 20px;">
            <h3>Thông tin cá nhân</h3>
        </div>

        <div class="profile-field">
            <label for="Email">Địa chỉ Email</label>
            @Html.TextBoxFor(m => m.Email, new
            {
                @class = "profile-input",
                @readonly = "readonly",
                style = "background: #f8f8f8; cursor: not-allowed;"
            })
            <small>Email được dùng để đăng nhập và không thể thay đổi.</small>
        </div>

        <div class="profile-field">
            <label for="TenNguoiDung">Họ và Tên</label>
            @Html.TextBoxFor(m => m.TenNguoiDung, new
            {
                @class = "profile-input",
                placeholder = "Nhập họ tên của bạn"
            })
            @Html.ValidationMessageFor(m => m.TenNguoiDung, "", new { @class = "text-danger", style = "color:red; font-size: 12px;" })
        </div>

        <div class="profile-field">
            <label for="SoDienThoai">Số điện thoại</label>
            @Html.TextBoxFor(m => m.SoDienThoai, new
            {
                @class = "profile-input",
                type = "tel",
                placeholder = "Nhập số điện thoại"
            })
            @Html.ValidationMessageFor(m => m.SoDienThoai, "", new { @class = "text-danger", style = "color:red; font-size: 12px;" })
        </div>

        <div class="profile-field">
            <label for="Address">Địa chỉ</label>
            @Html.TextAreaFor(m => m.Address, new
            {
                @class = "profile-input",
                rows = "3",
                placeholder = "Nhập địa chỉ của bạn"
            })
            @Html.ValidationMessageFor(m => m.Address, "", new { @class = "text-danger", style = "color:red; font-size: 12px;" })
        </div>

                    @* Email (Read-only) *@
                    <div class="profile-field">
                        <label for="Email">Địa chỉ Email (Tài khoản)</label>
                        <input type="email" id="Email" name="Email" class="profile-input" value="@userEmail" readonly style="background-color: #f0f0f0; cursor: not-allowed;" />
                        <small>Email là tài khoản đăng nhập, không thể thay đổi.</small>
                    </div>

                    @* Họ và Tên *@
                    <div class="profile-field">
                        <label for="TenNguoiDung">Họ và Tên</label>
                        <input type="text" id="TenNguoiDung" name="TenNguoiDung" class="profile-input" value="@displayName" />
                    </div>

                    @* Số điện thoại *@
                    <div class="profile-field">
                        <label for="SoDienThoai">Số điện thoại</label>
                        <input type="tel" id="SoDienThoai" name="SoDienThoai" class="profile-input" value="@userPhone" placeholder="Ví dụ: 0912-345-678" />
                    </div>

                    @* Địa chỉ *@
                    <div class="profile-field">
                        <label for="Address">Địa chỉ</label>
                        <textarea id="Address" name="Address" class="profile-input" rows="3" placeholder="Nhập địa chỉ của bạn"></textarea>
                    </div>

                    <div class="form-actions">
                        <button type="submit" class="btn btn-primary">
                            <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" style="margin-right: 5px;"><path d="M22 11.08V12a10 10 0 1 1-5.93-9.14" /><polyline points="22 4 12 14.01 9 11.01" /></svg>
                            Lưu Thay đổi
                        </button>
                        <a href="/TaiKhoan/Profile" class="btn btn-secondary">Hủy bỏ</a>
                    </div>
                }
            </div>

        </section>

    </div>
}