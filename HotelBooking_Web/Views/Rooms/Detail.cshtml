

@{
    ViewBag.Title = "Chi tiết phòng";
    Layout = "~/Views/Shared/_Layout.cshtml";

    // 1. Lấy ngày check-in: Nếu ViewBag có thì dùng, không thì lấy ngày hiện tại
    string checkIn = ViewBag.CheckIn as string ?? DateTime.Now.ToString("yyyy-MM-dd");

    // 2. Lấy ngày check-out: Nếu ViewBag có thì dùng, không thì lấy ngày mai
    string checkOut = ViewBag.CheckOut as string ?? DateTime.Now.AddDays(1).ToString("yyyy-MM-dd");

    // 3. Lấy số khách: Mặc định là 1
    int guests = ViewBag.Guests != null ? (int)ViewBag.Guests : 1;

    // 4. Lấy ID phòng an toàn
    int phongId = ViewBag.PhongID != null ? (int)ViewBag.PhongID : 0;

}

<input type="hidden" id="currentRoomId" value="@ViewBag.PhongID" />

<div class="container" style="margin-top: 40px; margin-bottom: 50px;">
    <section id="roomDetail" class="section">

        <div class="room-detail">

            <div class="room-gallery">
                <div class="slide-container">
                    <div id="slider-wrapper"></div>
                    <a class="prev" onclick="plusSlides(-1)">❮</a>
                    <a class="next" onclick="plusSlides(1)">❯</a>
                </div>
            </div>

            <div class="room-info">
                <h1 class="room-title" id="lblTenPhong">Đang tải dữ liệu...</h1>

                <div class="room-price">
                    <span id="lblGia">0</span> đ <span>/ đêm</span>
                </div>

                <div class="room-info-grid">
                    <div class="info-row">
                        <span class="label">Loại phòng:</span>
                        <span class="value" id="lblLoaiPhong">...</span>
                    </div>
                    <div class="info-row">
                        <span class="label">Trạng thái:</span>
                        <span class="available" id="lblTrangThai">Đang kiểm tra...</span>
                    </div>
                </div>

                <div class="room-description" style="border-top: 1px solid #eee; padding-top: 15px;">
                    <h3 style="font-size: 16px; margin-bottom: 8px;">Mô tả chi tiết:</h3>
                    <div id="lblMoTa" style="color: var(--secondary); line-height: 1.6;"></div>
                </div>

                <div class="room-buttons">
                    @*<button class="btn-book" style="width: 100%; padding: 12px; font-size: 16px; cursor: pointer;">
                        ĐẶT PHÒNG NGAY
                    </button>*@
                    <a href="@Url.Action("Bookings", "Booking", new { phongId = phongId, checkin = checkIn, checkout = checkOut, guests = guests })"
                       class="btn-book"
                       style="display: block; text-align: center; text-decoration: none; padding: 15px; background-color: #007bff; color: white; border-radius: 5px; font-weight: bold; font-size: 18px;">
                        ĐẶT PHÒNG NGAY
                    </a>
                </div>
            </div>
        </div>
    </section>
</div>

@section Scripts {
    <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
    <script src="~/Scripts/No1JavaScript/Detail.js"></script>
    
}
